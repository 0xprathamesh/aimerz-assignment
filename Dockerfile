FROM node:18-alpine

WORKDIR /app

COPY package*.json ./
RUN npm install

COPY . .

ARG MONGODB_URI
ARG NEXTAUTH_SECRET
ARG NEXTAUTH_URL


ENV MONGODB_URI=$MONGODB_URI
ENV NEXTAUTH_SECRET=$NEXTAUTH_SECRET
ENV NEXTAUTH_URL=$NEXTAUTH_URL

RUN npm run build

EXPOSE 3000

CMD ["npm", "start"]